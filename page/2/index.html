
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>iceesj</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    

    
    <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="iceesj">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="iceesj">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iceesj">
<meta name="twitter:description">
<meta name="twitter:creator" content="@iceesj">

    
    <link rel="alternative" href="/atom.xml" title="iceesj" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/author.jpg">
    
    
    <link rel="apple-touch-icon" href="/img/author.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/author.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="iceesj" title="iceesj"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="iceesj">iceesj</a></h1>
				<h2 class="blog-motto">Vida Loca</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/08/05/2014-8-5-Swift-ARC/" title="《浅入浅出Swift》Automatic Reference Counting 自动引用计数" itemprop="url">《浅入浅出Swift》Automatic Reference Counting 自动引用计数</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-08-05T12:00:00.000Z" itemprop="datePublished"> Published 2014-08-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####ARC</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        <span class="comment">//ARC机制会跟踪每一个实例正在被多少属性，常量和变量所引用，只要这个实例的引用数不为0，那么这个实例就不会被销毁。那么它的deinit也不会被调用</span></span><br><span class="line">        <span class="comment">//实例之间的循环引用是怎么发生的。如果消除循环引用导致内存泄露</span></span><br><span class="line">        </span><br><span class="line">        class Person &#123;</span><br><span class="line">            let name : String</span><br><span class="line">            init (name : String) &#123;</span><br><span class="line">                <span class="keyword">self</span>.name = name</span><br><span class="line">                println(<span class="string">"\(name) is being initialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            deinit &#123;</span><br><span class="line">                println(<span class="string">"\(name) is being deinitialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        var reference1:Person?</span><br><span class="line">        var reference2:Person?</span><br><span class="line">        var reference3:Person?</span><br><span class="line">        </span><br><span class="line">        reference1 = Person(name: <span class="string">"John Appleseed"</span>)</span><br><span class="line">        reference2 = reference1</span><br><span class="line">        reference3 = reference1</span><br><span class="line">        </span><br><span class="line">        reference1 = <span class="literal">nil</span></span><br><span class="line">        reference2 = <span class="literal">nil</span></span><br><span class="line">        reference3 = <span class="literal">nil</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func swiftARCMethodTwo() &#123;</span><br><span class="line">        <span class="comment">//Strong Reference Cycles Between Class Instances</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        class Person &#123;</span><br><span class="line">            let name : String</span><br><span class="line">            init (name : String)&#123;</span><br><span class="line">                <span class="keyword">self</span>.name = name</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            var apartment: Apartment?</span><br><span class="line">            deinit &#123;</span><br><span class="line"><span class="comment">//                apartment = nil;</span></span><br><span class="line">                println(<span class="string">"\(name) is being deinitialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        class Apartment&#123;</span><br><span class="line">            let number : Int</span><br><span class="line">            init (number : Int)&#123;</span><br><span class="line">                <span class="keyword">self</span>.number = number</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">weak</span> var tenant : Person?</span><br><span class="line">            deinit &#123;</span><br><span class="line"><span class="comment">//                tenant = nil;</span></span><br><span class="line">                println(<span class="string">"Apartment #\(number) is being deinitialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//上2个类分别都有另一个类的optional类型的变量。结果就是互相持有对方</span></span><br><span class="line">        <span class="comment">//在ARC中，当把John和number73都赋值为nil时，看似断了2个引用，但在实例中，还有apartment和tenant2个引用没断，于是，把释放写入deinit中</span></span><br><span class="line">        <span class="comment">//deinit并不会被调用。因为ARC中只有引用计数到0时，deinit才会被调用</span></span><br><span class="line">        <span class="comment">//为了解决上面的循环引用，引入了关键字weak</span></span><br><span class="line">        var john : Person?</span><br><span class="line">        var number73 : Apartment?</span><br><span class="line">        john = Person(name: <span class="string">"John Appleseed"</span>)</span><br><span class="line">        number73 = Apartment(number: <span class="number">73</span>)</span><br><span class="line">        </span><br><span class="line">        john!.apartment = number73</span><br><span class="line">        number73!.tenant = john</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        john          number73</span></span><br><span class="line"><span class="comment">//         \strong         \strong</span></span><br><span class="line"><span class="comment">// name:John Appleseed  ---&gt;strong     number:73</span></span><br><span class="line"><span class="comment">// apartmen&lt;Apartment 实例&gt; &lt;---weak  tenant:&lt;Person 实例&gt;</span></span><br><span class="line">        <span class="comment">//引入了weak引用不会阻止ARC回收实例，也就是说，一个实例，如果没有被强引用，再多的引用持有它的话，它依然可以被释放。</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//无主引用，Unowned References</span></span><br><span class="line">        <span class="comment">//weak是给optional类型用的（！？），而unowned是给非可选型用的</span></span><br><span class="line">        class Customer&#123;</span><br><span class="line">            let name :String</span><br><span class="line">            var card : CreditCard?</span><br><span class="line">            init (name : String)&#123;</span><br><span class="line">                <span class="keyword">self</span>.name = name</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            deinit &#123;</span><br><span class="line">                println(<span class="string">"\(name) is being deinitialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class CreditCard&#123;</span><br><span class="line">            let number : <span class="built_in">UInt64</span></span><br><span class="line">            unowned let customer : Customer</span><br><span class="line"><span class="comment">//            weak var customer : Customer?</span></span><br><span class="line">            init (number : <span class="built_in">UInt64</span> , customer : Customer)&#123;</span><br><span class="line">                <span class="keyword">self</span>.number = number</span><br><span class="line">                <span class="keyword">self</span>.customer = customer</span><br><span class="line">            &#125;</span><br><span class="line">            deinit &#123;</span><br><span class="line">                 println(<span class="string">"Card #\(number) is being deinitialized"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        var johnOne : Customer?</span><br><span class="line">        johnOne = Customer(name: <span class="string">"John Appleseed"</span>)</span><br><span class="line">        johnOne!.card = CreditCard(number: <span class="number">1234</span>_5678_9012_3456, customer: johnOne!)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//闭包导致的循环强引用，Strong Reference Cycles for Closures</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        class HTMLElement&#123;</span><br><span class="line">            let name: String</span><br><span class="line">            let text: String?</span><br><span class="line">            //闭包</span><br><span class="line">            lazy var asHTML: () -&gt; String = &#123;</span><br><span class="line">//                [unowned self] in</span><br><span class="line">                if let text = self.text &#123;</span><br><span class="line">                    return "&lt;\(self.name)&gt;\(text)&lt;/\(self.name)&gt;"</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    return "&lt;\(self.name) /&gt;"</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            init(name: String, text: String? = nil) &#123;</span><br><span class="line">                self.name = name</span><br><span class="line">                self.text = text</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            deinit &#123;</span><br><span class="line">                println("\(name) is being deinitialized")</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/08/05/2014-8-5-Swift-ARC/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/ARC/">ARC</a>►<a class="article-category-link" href="/categories/Swift/ARC/自动引用计数/">自动引用计数</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/08/05/2014-8-5-Swift-ARC/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/08/05/2014-8-5-Swift-ARC/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/31/2014-7-31-Swift-Deinitialization/" title="《浅入浅出Swift》Deinitialization 析构过程" itemprop="url">《浅入浅出Swift》Deinitialization 析构过程</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-31T15:33:00.000Z" itemprop="datePublished"> Published 2014-07-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Initialization</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        <span class="comment">//析构过程是构造过程的逆向过程，当一个类的实例被释放的时候，在内存中消失前，析构器会被调用</span></span><br><span class="line">        <span class="comment">//swift通过ARC管理内存。</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//由于swift是ARC管理内存，所以析构过程已经不是那么重要了</span></span><br><span class="line">        class MyClass&#123;</span><br><span class="line">            var myNum = <span class="number">0</span></span><br><span class="line">            init ()&#123;</span><br><span class="line">                myNum = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            deinit &#123;</span><br><span class="line">                myNum = <span class="number">0</span></span><br><span class="line">                println(<span class="string">"myNum \(myNum)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        var myClass = MyClass()</span><br><span class="line">        println(<span class="string">"myClass.myNum = \(myClass.myNum)"</span>)</span><br><span class="line"><span class="comment">//        myClass = nil</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Deinitializers in Action</span></span><br><span class="line">        <span class="keyword">struct</span> Bank &#123;</span><br><span class="line">            <span class="comment">//在银行的金币数</span></span><br><span class="line">            <span class="keyword">static</span> var coinsInBank = <span class="number">10</span>_000</span><br><span class="line">            <span class="comment">//出售金币</span></span><br><span class="line">            <span class="keyword">static</span> func vendCoins(var numberOfCoinsToVend:Int)-&gt;Int&#123;</span><br><span class="line">                println(<span class="string">"numberOfCoinsToVend = \(numberOfCoinsToVend)"</span>)</span><br><span class="line">                println(<span class="string">"coinsInBank = \(coinsInBank)"</span>)</span><br><span class="line">                numberOfCoinsToVend = min(numberOfCoinsToVend, coinsInBank)</span><br><span class="line">                println(<span class="string">"numberOfCoinsToVend = \(numberOfCoinsToVend)"</span>)</span><br><span class="line">                coinsInBank -= numberOfCoinsToVend</span><br><span class="line">                <span class="keyword">return</span> numberOfCoinsToVend</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//收到金币</span></span><br><span class="line">            <span class="keyword">static</span> func receiveCoins(coins:Int)&#123;</span><br><span class="line">                coinsInBank += coins</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        class Player&#123;</span><br><span class="line">            <span class="comment">//硬币钱包</span></span><br><span class="line">            var coinsInPurse : Int</span><br><span class="line">            <span class="comment">//初始化</span></span><br><span class="line">            init (coins: Int)&#123;</span><br><span class="line">                coinsInPurse = Bank.vendCoins(coins)</span><br><span class="line">                println(<span class="string">"Player.init.coinsInPurse = \(coinsInPurse)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//赢得的钱币</span></span><br><span class="line">            func winCoins(coins:Int)&#123;</span><br><span class="line">                coinsInPurse += Bank.vendCoins(coins)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//析构过程</span></span><br><span class="line">            deinit&#123;</span><br><span class="line">                Bank.receiveCoins(coinsInPurse)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//生成一个player，初始化银行出售金币100枚</span></span><br><span class="line">        var playerOne : Player? = Player(coins:<span class="number">100</span>)</span><br><span class="line">        println(<span class="string">"A new player has joined the game with \(playerOne!.coinsInPurse) coins"</span>)</span><br><span class="line">        <span class="comment">// prints "A new player has joined the game with 100 coins"</span></span><br><span class="line">        println(<span class="string">"There are now \(Bank.coinsInBank) coins left in the bank"</span>)</span><br><span class="line">        <span class="comment">// 银行剩余9900 coins</span></span><br><span class="line">        </span><br><span class="line">        playerOne!.winCoins(<span class="number">2</span>_000)</span><br><span class="line">        println(<span class="string">"PlayerOne won 2000 coins &amp; now has \(playerOne!.coinsInPurse) coins"</span>)</span><br><span class="line">        <span class="comment">//赢了2000枚，加上前面的100枚</span></span><br><span class="line">        println(<span class="string">"The bank now only has \(Bank.coinsInBank) coins left"</span>)<span class="comment">//银行剩余7900</span></span><br><span class="line">        playerOne = <span class="literal">nil</span></span><br><span class="line">        println(<span class="string">"The bank now only has \(Bank.coinsInBank) coins left"</span>)<span class="comment">//银行剩余10000枚</span></span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/31/2014-7-31-Swift-Deinitialization/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Initialization/">Initialization</a>►<a class="article-category-link" href="/categories/Swift/Initialization/析构过程/">析构过程</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/31/2014-7-31-Swift-Deinitialization/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/31/2014-7-31-Swift-Deinitialization/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/26/2014-7-26-Swift-Initialization/" title="《浅入浅出Swift》Initialization 构造过程" itemprop="url">《浅入浅出Swift》Initialization 构造过程</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-26T03:33:00.000Z" itemprop="datePublished"> Published 2014-07-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Initialization</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        <span class="comment">//生成class，struct，enum等实例的准备过程叫做构造过程。</span></span><br><span class="line">        <span class="comment">//通常定义一个方法来完成，这个方法叫做，构造器。</span></span><br><span class="line">        <span class="comment">//它的逆向过程，叫做析构器，用于在实例被释放前做一些清理工作和自定义的处理</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//为存储属性设置初始值，必须为所有属性服赋特点的初始值</span></span><br><span class="line">        <span class="comment">//在定义存储型属性时直接给个初始值，否则就必须在init里面指定一个初始值</span></span><br><span class="line">        <span class="comment">//上述方法都不会触发存储型属性的坚挺者行为</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Initializers</span></span><br><span class="line">        <span class="keyword">struct</span> Fahrenheit&#123;</span><br><span class="line">            var temperature: Double</span><br><span class="line">            init ()&#123;</span><br><span class="line">                temperature = <span class="number">32.0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        var f = Fahrenheit()</span><br><span class="line">        println(<span class="string">"The default temperature is \(f.temperature)° Fahrenheit"</span>)</span><br><span class="line">        <span class="comment">// prints "The default temperature is 32.0° Fahrenheit"</span></span><br><span class="line">        <span class="comment">//直接定义</span></span><br><span class="line">        <span class="keyword">struct</span> FahreheitTwo&#123;</span><br><span class="line">            var temperature: Double = <span class="number">1.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Customizing Initialization</span></span><br><span class="line">        <span class="comment">//Initialization Parameters</span></span><br><span class="line">        <span class="keyword">struct</span> Celsius&#123;</span><br><span class="line">            var temperatureInCelsius:Double = <span class="number">0.0</span></span><br><span class="line">            init (fromFahrenheit fahrenheit:Double)&#123;</span><br><span class="line">                temperatureInCelsius = (fahrenheit - <span class="number">32.0</span>) / <span class="number">1.8</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//可以定义多个构造器</span></span><br><span class="line">            init (fromKelvin kelvin:Double)&#123;</span><br><span class="line">                temperatureInCelsius = kelvin - <span class="number">273.15</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//沸点</span></span><br><span class="line">        let boilingPointOfWater = Celsius(fromFahrenheit: <span class="number">212.0</span>)</span><br><span class="line">        <span class="comment">//冰点</span></span><br><span class="line">        let freezingPointOfWater = Celsius(fromKelvin: <span class="number">273.15</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//本地和外部参数名称，Local and External Parameter Names</span></span><br><span class="line">        <span class="comment">//下面的例子定义了一个结构称为颜色,和三个常量属性称为红、绿、蓝。这些属性存储一个值在0.0和1.0之间显示红、绿、蓝的颜色。</span></span><br><span class="line">        <span class="comment">//颜色提供了一个初始化器和三个适当命名的参数类型</span></span><br><span class="line">        <span class="keyword">struct</span> Color&#123;</span><br><span class="line">            let red = <span class="number">0.0</span> ,green = <span class="number">0.0</span> ,blue = <span class="number">0.0</span></span><br><span class="line">            init (red:Double, green:Double, blue:Double)&#123;</span><br><span class="line">                <span class="keyword">self</span>.red  = red</span><br><span class="line">                <span class="keyword">self</span>.green = green</span><br><span class="line">                <span class="keyword">self</span>.blue = blue</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let magenta = Color(red: <span class="number">1.0</span>, green: <span class="number">0.0</span>, blue: <span class="number">1.0</span>)</span><br><span class="line"><span class="comment">//        let veryGreen = Color(0.0,1.0,0.0)</span></span><br><span class="line">        <span class="comment">// this reports a compile-time error - external names are required</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//可选属性类型，Optional Property Types</span></span><br><span class="line">        class SurveyQuestion&#123;</span><br><span class="line">            var text:String</span><br><span class="line">            var response:String?<span class="comment">//&lt;--- ?</span></span><br><span class="line">            init (text:String)&#123;</span><br><span class="line">                <span class="keyword">self</span>.text = text</span><br><span class="line">            &#125;</span><br><span class="line">            func ask()&#123;</span><br><span class="line">                println(text)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let cheeseQuestion = SurveyQuestion(text:<span class="string">"Do you like cheese?"</span>)</span><br><span class="line">        cheeseQuestion.ask()</span><br><span class="line">        cheeseQuestion.response = <span class="string">"Yes,I do like cheese."</span></span><br><span class="line">        println(cheeseQuestion.response)<span class="comment">//输出结果</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//在初始化期间修改常量属性，Modifying Constant Properties During Initialization</span></span><br><span class="line">        class SurveyQuestionTwo &#123;</span><br><span class="line">            let text:String</span><br><span class="line">            var response:String?</span><br><span class="line">            init (text :String)&#123;</span><br><span class="line">                <span class="keyword">self</span>.text = text</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            func ask() &#123;</span><br><span class="line">                println(text)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let beetsQuestion = SurveyQuestion(text: <span class="string">"How about beets"</span>)</span><br><span class="line">        beetsQuestion.ask()</span><br><span class="line">        beetsQuestion.response = <span class="string">"I also like beets.(But not with cheese.)"</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//默认初始化，Default Initializers</span></span><br><span class="line">        class ShoppingListItem &#123;</span><br><span class="line">            var name:String?</span><br><span class="line"><span class="comment">//            var quantity ＝ 1 //Xcode6 beta 3 bug</span></span><br><span class="line">            var purchased = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Memberwise Initializers for Structure Types</span></span><br><span class="line">        <span class="keyword">struct</span> SizeTest &#123;</span><br><span class="line">            var width = <span class="number">0.0</span>, heigh = <span class="number">0.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        let twoByTwo = SizeTest(width: <span class="number">2.0</span>, heigh: <span class="number">2.0</span>)</span><br><span class="line">        <span class="keyword">struct</span> MyShruct &#123;</span><br><span class="line">            var name = <span class="string">"1"</span>, number = <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        let myStruct = MyShruct(name: <span class="string">"Hello"</span>, number: <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//值类型的构造器代理Initializer Delegation for Value Types</span></span><br><span class="line">        <span class="comment">//init还能调用其他的构造器作为构造过程的一部分。这的过程叫做构造器代理</span></span><br><span class="line">        <span class="comment">//值类型（struct，enum）并不支持继承，所以，他们构造器代理与类的构造器代理规则和形式有所区别</span></span><br><span class="line">        <span class="keyword">struct</span> Size&#123;</span><br><span class="line">            var width = <span class="number">0.0</span> ,height = <span class="number">0.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">struct</span> Point &#123;</span><br><span class="line">            var x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">struct</span> Rect &#123;</span><br><span class="line">            var origin = Point()</span><br><span class="line">            var size = Size()</span><br><span class="line">            init ()&#123;&#125;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            init (origin:Point, size:Size)&#123;</span><br><span class="line">                <span class="keyword">self</span>.origin = origin</span><br><span class="line">                <span class="keyword">self</span>.size = size</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            init (center:Point, size:Size)&#123;</span><br><span class="line">                let originX = center.x - (size.width / <span class="number">2</span>)</span><br><span class="line">                let originY = center.y - (size.height / <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">self</span>.init(origin:Point(x: originX, y: originY),size:size)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Rect中有3个构造器，第一个是空&#123;&#125;，当这个构造器被调用的时候：</span></span><br><span class="line"><span class="comment">//        let rect = Rect()</span></span><br><span class="line"><span class="comment">//        println(rect)//origin (0.0 ,0.0) ,size (0.0, 0.0)</span></span><br><span class="line">        let originRect = Rect(origin: Point(x:<span class="number">2.0</span>,y:<span class="number">2.0</span>), size: Size(width: <span class="number">5.0</span>, height: <span class="number">5.0</span>))</span><br><span class="line">        let centerRect = Rect(center: Point(x: <span class="number">4.0</span>, y: <span class="number">4.0</span>), size: Size(width: <span class="number">3.0</span>, height: <span class="number">3.0</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//类继承和构造过程， Class Inheritance and Initialization</span></span><br><span class="line">        <span class="comment">//swift提供了2种构造器，以确保所有的属性都能被初始化，指定构造器 和 便利构造器</span></span><br><span class="line">        <span class="comment">//https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Initialization.html#//apple_ref/doc/uid/TP40014097-CH18-XID_265</span></span><br><span class="line">        <span class="comment">//构造器调用链</span></span><br><span class="line">        <span class="comment">//指定构造器和便利构造器的调用关系，swift指定了3条规则</span></span><br><span class="line">        <span class="comment">//1，构造器代理必须调用他的直接父类的指定构造器</span></span><br><span class="line">        <span class="comment">//2，便利构造器必须调用它同一个类中定义的其他构造器</span></span><br><span class="line">        <span class="comment">//3，便利构造器的结尾部分必须调用一个指定构造器</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//指定构造器必须总是向上代理 向上代理的意思就是调用父类指定的构造器</span></span><br><span class="line">        <span class="comment">//便利构造器必须总是横向代理 横向代理的意思就是调用它自己类内的构造器</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//指定构造器和便利构造器，Designated Initializers and Convenience Initializers</span></span><br><span class="line">        <span class="comment">//指定构造器 &lt;-- 便利构造器 &lt;-- 便利构造器   【一个类】</span></span><br><span class="line">        <span class="comment">//        ^</span></span><br><span class="line">        <span class="comment">//        |</span></span><br><span class="line">        <span class="comment">//         \</span></span><br><span class="line">        <span class="comment">//便利构造器 -&gt;指定构造器  &lt;-- 便利构造器 【一个类】</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//两段式构造过程，Two-Phase Initialization</span></span><br><span class="line">        <span class="comment">//swift类包含2个阶段</span></span><br><span class="line">        <span class="comment">//1，每个存储型属性通过她们自己的类构造器来设置初始值</span></span><br><span class="line">        <span class="comment">//2，每个存储型属性都可以进一步设置他们定制化的初始化</span></span><br><span class="line">        <span class="comment">//so两段式构造过程，就是告诉我们，使用变量，常量之前要确保它被定义并且被初始化了</span></span><br><span class="line">        var csjNumA:Int = <span class="number">1</span></span><br><span class="line">        var csjNumB:Int = <span class="number">2</span></span><br><span class="line">        func csjNumFunc()&#123;</span><br><span class="line">            csjNumA = csjNumB</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//构造器的继承和重写，Initializer Inheritance and Overriding</span></span><br><span class="line">        <span class="comment">//swift中，子类不会默认的继承父类的构造器。但是有时觉得父类的构造器功能不够强大，这个时候就要在子类中重写构造器，以达到目的。</span></span><br><span class="line">        <span class="comment">//重写一个指定构造器， 写完之后要调用父类构造器</span></span><br><span class="line">        <span class="comment">//重写一个便利构造器，必须要调用这个类中的其他指定构造器</span></span><br><span class="line">        <span class="comment">//构造器重写不需要添加 override关键字</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//自动构造器的继承，Automatic Initializer Inheritance</span></span><br><span class="line">        <span class="comment">//swift构造器继承机制要满足2点：</span></span><br><span class="line">        <span class="comment">//1，如果子类没有定义任何指定构造器，它将自动继承所有父类的指定构造器</span></span><br><span class="line">        <span class="comment">//2，如果子类中定义了所有父类的指定构造器的实现，它将会自动继承所有父类的便利构造器</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//指定构造器和便利构造器的语法，Syntax for Designated and Convenience Initializers</span></span><br><span class="line">        <span class="comment">//指定构造器</span></span><br><span class="line">        <span class="comment">//init(参数)&#123;</span></span><br><span class="line">        <span class="comment">//    函数体</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//便利构造器</span></span><br><span class="line">        <span class="comment">//convenience init(参数)&#123;</span></span><br><span class="line">        <span class="comment">//    函数体</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="comment">//convenience型的构造器，只能调用它自己这个类中的非convenience</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//指定和便利构造器初始化，Designated and Convenience Initializers in Action</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//用闭包或者函数设置属性的默认值，Setting a Default Property Value with a Closure or Function</span></span><br><span class="line">        class MyClass&#123;</span><br><span class="line">            var myNumbers:[Int] = &#123;</span><br><span class="line">                var tempNum = [Int]() <span class="comment">//生成一个临时的数组，在闭包最后给myNumbers赋值</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span>.<span class="number">.10</span>&#123;</span><br><span class="line">                    tempNum.append(i) <span class="comment">//添加元素</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> tempNum <span class="comment">//闭包的返回值</span></span><br><span class="line">            &#125;() <span class="comment">//（）表示myNumbers是闭包的返回值，要不然就成了闭包这个函数了</span></span><br><span class="line">            </span><br><span class="line">            func getNumbers()-&gt;[Int]&#123;</span><br><span class="line">                <span class="keyword">return</span> myNumbers</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let myClass = MyClass()</span><br><span class="line">        println(<span class="string">"myClass.getNumbers =  \(myClass.getNumbers())"</span>)<span class="comment">//获取到了MyClass的myNumbers数组</span></span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/26/2014-7-26-Swift-Initialization/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Initialization/">Initialization</a>►<a class="article-category-link" href="/categories/Swift/Initialization/构造过程/">构造过程</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/26/2014-7-26-Swift-Initialization/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/26/2014-7-26-Swift-Initialization/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/19/2014-7-19-Swift-Inheritance/" title="《浅入浅出Swift》Inheritance 继承" itemprop="url">《浅入浅出Swift》Inheritance 继承</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-19T12:33:00.000Z" itemprop="datePublished"> Published 2014-07-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Inheritance</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        <span class="comment">//一个类可以从其他类继承方法，属性以及一些特征。被集成的类叫父类，那另一个就是子类</span></span><br><span class="line">        <span class="comment">//Vehicle是一个基类</span></span><br><span class="line">        class Vehicle &#123;</span><br><span class="line">            var numberOfWheels : Int</span><br><span class="line">            var maxPassengers : Int</span><br><span class="line">            func description() -&gt; String&#123;</span><br><span class="line">                 <span class="keyword">return</span> <span class="string">"\(numberOfWheels) wheels; up to \(maxPassengers) passengers"</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            init ()&#123;</span><br><span class="line">                numberOfWheels = <span class="number">0</span></span><br><span class="line">                maxPassengers = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//继承</span></span><br><span class="line">        class Car : Vehicle&#123;<span class="comment">//继承的语法</span></span><br><span class="line">            <span class="comment">//swift既不会继承父类的初始化，也不会自动执行父类的初始化方法</span></span><br><span class="line">            init()&#123;<span class="comment">//MyCar 类初始化方法</span></span><br><span class="line">                <span class="keyword">super</span>.init()</span><br><span class="line">                numberOfWheels = <span class="number">4</span> <span class="comment">//从Vehicle继承过来的属性</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        class CarTwo : Vehicle&#123;</span><br><span class="line">            init ()&#123;</span><br><span class="line">                <span class="keyword">super</span>.init()</span><br><span class="line">                numberOfWheels = <span class="number">4</span></span><br><span class="line">                maxPassengers = <span class="number">5</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let carTwo = CarTwo() <span class="comment">//执行CSJInherTwo的init方法</span></span><br><span class="line">        println(<span class="string">"inher = \(carTwo.description())"</span>)<span class="comment">//description从父类继承来的，在CSJInherTwo并没有定义</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//方法重写 Overriding</span></span><br><span class="line">        class CarThree : Vehicle&#123;</span><br><span class="line">            var speed : Double = <span class="number">0</span></span><br><span class="line">            init()&#123;</span><br><span class="line">                <span class="keyword">super</span>.init()</span><br><span class="line">                numberOfWheels = <span class="number">4</span></span><br><span class="line">                maxPassengers = <span class="number">5</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            override func description() -&gt; String &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.description() + <span class="string">"now speed is \(speed) mph"</span><span class="comment">//只是在父类的description输出内容后面加字</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let carThree = CarThree()</span><br><span class="line">        println(<span class="string">"carThree : \(carThree.description())"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//也可以对父类的set和get方法进行重写，但是必须写明属性名和属性类型</span></span><br><span class="line">        <span class="comment">//这样重写是完全忽略这个属性在父类中定义成用于计算或者用于存储的，在子类中提供的set和get方法，可以把父类的“只读”型属性重写成“读写“属性</span></span><br><span class="line">        <span class="comment">//Overriding Property Getters and Setters</span></span><br><span class="line">        class CarSpeedLimited : CarThree&#123;</span><br><span class="line">            override var speed: Double &#123;</span><br><span class="line">            get &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.speed</span><br><span class="line">            &#125;</span><br><span class="line">            set&#123;</span><br><span class="line">                println(<span class="string">"car must speed limited lower than 100 mph"</span>)</span><br><span class="line">                <span class="keyword">super</span>.speed = min(newValue, <span class="number">40.0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let limitedCar = CarSpeedLimited()</span><br><span class="line"><span class="comment">//        limitedCar.speed = 60.0 //貌似Xcode6 beta3 bug了 报错Ambiguous use of 'speed'</span></span><br><span class="line">        println(<span class="string">"SpeedLimitedCar: \(limitedCar.description())"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//overriding property observers</span></span><br><span class="line">        <span class="comment">//不能为一个不能改变值的属性重写属性的监听者，比如继承来的只读类型属性</span></span><br><span class="line">        <span class="comment">//不能为一个属性同时加入set方法和监听者</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        class AutomaticCar : CarThree&#123;</span><br><span class="line">            var gear = 1</span><br><span class="line">            override var speed : Double&#123;</span><br><span class="line">                didSet&#123;</span><br><span class="line">//                    gear = 1</span><br><span class="line">                    gear = Int (speed / 10.0) + 1</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            override func description() -&gt; String &#123;</span><br><span class="line">                return super.description() + "in gear \(gear)"</span><br><span class="line">            &#125;</span><br><span class="line">//            init() &#123;</span><br><span class="line">//                super.init()</span><br><span class="line">//            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//swift防止重写 使用@final关键字</span></span><br><span class="line">        class FinalTest &#123;</span><br><span class="line">            var numberOfWheels : Int</span><br><span class="line">            var maxPassengers : Int</span><br><span class="line">            @final func nicai()-&gt;String&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"你猜"</span></span><br><span class="line">            &#125;</span><br><span class="line">            init()&#123;</span><br><span class="line">                numberOfWheels = <span class="number">0</span></span><br><span class="line">                maxPassengers = <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/19/2014-7-19-Swift-Inheritance/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Inheritance/">Inheritance</a>►<a class="article-category-link" href="/categories/Swift/Inheritance/继承/">继承</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/19/2014-7-19-Swift-Inheritance/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/19/2014-7-19-Swift-Inheritance/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/19/2014-7-19-Swift-Subscripts/" title="《浅入浅出Swift》Subscripts 下标" itemprop="url">《浅入浅出Swift》Subscripts 下标</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-19T10:33:00.000Z" itemprop="datePublished"> Published 2014-07-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Subscripts</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        <span class="comment">//下标允许我们为class，struct，enum定义下标，以更便捷的方式访问属性。</span></span><br><span class="line">        <span class="comment">//比如，Array和Dictionary都是结构和改写struct中保存的数据。</span></span><br><span class="line">        <span class="comment">//一个类型中可以定义多种下标访问方式（重载）</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//下标可以定义“读写”，“只读”型，通过定义一组操作完成的，这与之前的计算属性的setter和getter是一样的</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//下标语法，Subscript Syntax</span></span><br><span class="line">        <span class="comment">//读写型</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        subscript(index:Int) -&gt; Int &#123;</span><br><span class="line">            get &#123;</span><br><span class="line">                // return an appropriate subscript value here</span><br><span class="line">            &#125;</span><br><span class="line">            set(newValue) &#123;</span><br><span class="line">                // perform a suitable setting action here</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//只读型</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        subscript (index: Int) -&gt; Int&#123;</span><br><span class="line">            //因为只有一个get方法，所以不需要get&#123;&#125;了</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//定义了一个叫TimesTable的结构体，他有一个只读性下标的定义</span></span><br><span class="line">        <span class="comment">//通过下标语法subscript 可以得到multiplier那么多倍的index值</span></span><br><span class="line">        <span class="keyword">struct</span> TimesTable&#123;</span><br><span class="line">            let multiplier: Int</span><br><span class="line">            subscript (index : Int) -&gt; Int&#123;</span><br><span class="line">                println(multiplier)<span class="comment">//3</span></span><br><span class="line">                println(index)<span class="comment">//6</span></span><br><span class="line">                println(multiplier * index)<span class="comment">//18</span></span><br><span class="line">                <span class="keyword">return</span> multiplier * index</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let threeTimesTable = TimesTable(multiplier: <span class="number">3</span>)</span><br><span class="line">        println(<span class="string">"six times three is \(threeTimesTable[6])"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//多维数组，二维数组，下标选项（Subscript Options）</span></span><br><span class="line">        <span class="keyword">struct</span> Matrix&#123;</span><br><span class="line">            <span class="comment">//行，列</span></span><br><span class="line">            let rows:Int, columns:Int</span><br><span class="line">            var grid:[Double]</span><br><span class="line">            init (rows:Int ,columns:Int)&#123;</span><br><span class="line">                <span class="keyword">self</span>.rows = rows</span><br><span class="line">                <span class="keyword">self</span>.columns = columns</span><br><span class="line">                grid = Array(count: rows * columns, repeatedValue: <span class="number">0.0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            func indexIsValidForRow(row:Int, column:Int) -&gt; Bool&#123;</span><br><span class="line">                <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; rows &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; columns</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            subscript (row:Int ,column:Int) -&gt; Double&#123;</span><br><span class="line">                get &#123;</span><br><span class="line">                    assert(indexIsValidForRow(row, column: column), <span class="string">"Index out of range"</span>)</span><br><span class="line">                    <span class="keyword">return</span> grid[(row * columns) + column]</span><br><span class="line">                &#125;</span><br><span class="line">                set &#123;</span><br><span class="line">                    assert(indexIsValidForRow(row, column: column), <span class="string">"Index out of range"</span>)</span><br><span class="line">                    grid[(row * columns)+column] = newValue</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//定义了矩阵类型Matrix ，通过grid来定义一个一维Array来保存数据</span></span><br><span class="line">            <span class="comment">//读写型下标</span></span><br><span class="line">            <span class="comment">//根据row和column可以计算出要访问的元素在Array中的位置，通过Array下标可直接～读取～写入～数据</span></span><br><span class="line"><span class="comment">//            var matrix = Matrix(rows: 2, columns: 2)</span></span><br><span class="line"><span class="comment">//            matrix[0, 1] = 1.5</span></span><br><span class="line"><span class="comment">//            matrix[1, 0] = 3.2</span></span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/19/2014-7-19-Swift-Subscripts/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Subscripts/">Subscripts</a>►<a class="article-category-link" href="/categories/Swift/Subscripts/下标/">下标</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/19/2014-7-19-Swift-Subscripts/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/19/2014-7-19-Swift-Subscripts/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/16/2014-7-16-Swift-Methods/" title="《浅入浅出Swift》Methods 方法" itemprop="url">《浅入浅出Swift》Methods 方法</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-16T15:50:00.000Z" itemprop="datePublished"> Published 2014-07-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Methods</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//实例方法，Instance Methods</span></span><br><span class="line"><span class="comment">//swift会为方法的第一个参数只提供函数内部使用的名字，从第二个参数开始，既可以外部用，也可以内部用</span></span><br><span class="line">class CsjClass&#123;</span><br><span class="line">    var myNum : Int = <span class="number">0</span></span><br><span class="line">    func increaseNum(base:Int, numberOfTimes:Int)&#123;</span><br><span class="line">        myNum += base * numberOfTimes</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var csjClass = CsjClass()</span><br><span class="line"><span class="comment">//第二个参数开始，会自动提供一个外部使用变量名</span></span><br><span class="line">csjClass.increaseNum(<span class="number">10</span>, numberOfTimes: <span class="number">8</span>)<span class="comment">//******</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//func想为外部提供一个变量名的话有2种做法</span></span><br><span class="line"><span class="comment">//func csjFunc(value paramA:Int)&#123;......&#125; //value是给外部使用的名字，paramA是内部使用</span></span><br><span class="line"><span class="comment">//func csjFunc(#paramA:Int) &#123;......&#125; //paramA 既是外部用的，也是内部用的</span></span><br><span class="line"><span class="comment">//csjClass类的实例方法中，相当于，从第二个参数开始，swift自动为我们提供了"#"的功能，不需要我们写#</span></span><br><span class="line">class NewCsjClass&#123;</span><br><span class="line">    var myNum : Int = <span class="number">0</span></span><br><span class="line">    <span class="comment">//"_ "这样swift就不再会自动提供外部使用名字了</span></span><br><span class="line">    func increaseNum(base:Int, _ numberOfTimes:Int)&#123;</span><br><span class="line">        myNum += base * numberOfTimes</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var newCsjClass = NewCsjClass()</span><br><span class="line">newCsjClass.increaseNum(<span class="number">10</span>, <span class="number">8</span>)<span class="comment">//******</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//self属性，The self Property</span></span><br><span class="line"><span class="comment">//每个实例，都有一个属性用于表示它自己这个实例，这个属性叫做self</span></span><br><span class="line">class CSJSedClass &#123;</span><br><span class="line">    var num : Int = <span class="number">0</span></span><br><span class="line">    <span class="comment">//传入参数名叫num，设置属性也叫num的时候，到底是传入的值，还是实例的属性，我们为实例属性前面加了self，表示这个是实例自己的属性</span></span><br><span class="line">    func setNume(num:Int)&#123;</span><br><span class="line">        <span class="keyword">self</span>.num = num</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//变化（修改）方法，修改值类型的实例方法，Modifying Value Types from Within Instance Methods</span></span><br><span class="line"><span class="comment">//上述都是class的情况，对于struct，enum这样的值传递类型，却不能使用实例方法来改变属性的值</span></span><br><span class="line"><span class="keyword">struct</span> CSJPoint&#123;</span><br><span class="line">    var x = <span class="number">0</span>, y = <span class="number">0</span></span><br><span class="line">    mutating func moveByXY(deltaX: Int, y deltaY:Int)&#123;</span><br><span class="line">        x += deltaX</span><br><span class="line">        y += deltaY</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var csjPoint = CSJPoint()</span><br><span class="line">csjPoint.moveByXY(<span class="number">3</span>, y: <span class="number">4</span>)</span><br><span class="line">println(<span class="string">"x:\(csjPoint.x),y:\(csjPoint.y)"</span>)</span><br><span class="line"><span class="comment">//在struct，enum里使用mutating关键字，达到class里一样的效果</span></span><br><span class="line"><span class="comment">//如果x,y是let就不能使用，不能改变常量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在mutating方法中，给self赋值</span></span><br><span class="line"><span class="keyword">struct</span> CSJTwoPoint&#123;</span><br><span class="line">    var x = <span class="number">0</span> ,y = <span class="number">0</span></span><br><span class="line">    mutating func changeSelf(deltaX:Int, y deltaY:Int)&#123;</span><br><span class="line">        <span class="keyword">self</span> = CSJTwoPoint(x:deltaX,y:deltaY)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var csjTwoPoint = CSJTwoPoint()</span><br><span class="line">csjTwoPoint.changeSelf(<span class="number">3</span>,y:<span class="number">4</span>)</span><br><span class="line">println(<span class="string">"x:\(csjTwoPoint.x),y:\(csjTwoPoint.y)"</span>)</span><br><span class="line"><span class="comment">//达到了改变csjTwoPoint中x和y的目的，给self赋值的方法，却是生成了一个新的CSJTwoPoint实例（内部做了内存释放工作）</span></span><br><span class="line"><span class="keyword">enum</span> CSJStateMachine&#123;</span><br><span class="line">    <span class="keyword">case</span> None,Init,Run,Deinit</span><br><span class="line">    <span class="comment">//实例方法</span></span><br><span class="line">    mutating func nextState()&#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span>&#123;</span><br><span class="line">        <span class="keyword">case</span> None:<span class="keyword">self</span> = Init</span><br><span class="line">        <span class="keyword">case</span> Init:<span class="keyword">self</span> = Run</span><br><span class="line">        <span class="keyword">case</span> Run:<span class="keyword">self</span> = Deinit</span><br><span class="line">        <span class="keyword">case</span> Deinit:<span class="keyword">self</span> = None</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var csjStateMachine = CSJStateMachine.None</span><br><span class="line">csjStateMachine.nextState() <span class="comment">//self变成Init</span></span><br><span class="line">println(csjStateMachine == CSJStateMachine.Init)<span class="comment">//ture</span></span><br><span class="line">csjStateMachine.nextState()</span><br><span class="line">println(csjStateMachine == CSJStateMachine.Run)<span class="comment">//ture</span></span><br><span class="line"><span class="comment">//状态机的状态切换代码可以直接写在enum的定义中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型方法，Type Methods</span></span><br><span class="line"><span class="comment">//上面地方都是实例方法，它们都是针对某一个实例进行操作的，而类方法，是对这个类型的。（static和class）</span></span><br><span class="line">class TestClass&#123;</span><br><span class="line">    class var computedProperty : Int &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    class func someMethod()&#123;</span><br><span class="line">        <span class="comment">//这才是一个类方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//因为类里面的类型属性只能用于计算，不能保存数据，所以类的类方法，暂时不适合写一个可以跑起来的例子，应该结合struct或者enum，才可以写</span></span><br><span class="line"><span class="keyword">struct</span> LevelTracker&#123;<span class="comment">//等级跟踪器</span></span><br><span class="line">    <span class="keyword">static</span> var highestUnlockedLevel = <span class="number">1</span><span class="comment">//类型属性，所有的实例共用这个值</span></span><br><span class="line">    <span class="comment">//类方法</span></span><br><span class="line">    <span class="keyword">static</span> func unlockLevel(level: Int)&#123;</span><br><span class="line">        <span class="keyword">if</span> level &gt; highestUnlockedLevel&#123;</span><br><span class="line">            highestUnlockedLevel = level</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//类方法</span></span><br><span class="line">    <span class="keyword">static</span> func levelIsUnlocked(level : Int) -&gt; Bool&#123;</span><br><span class="line">        <span class="keyword">return</span> level &lt;= highestUnlockedLevel</span><br><span class="line">    &#125;</span><br><span class="line">    var currentLevel = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    mutating func advanceToLevel(level:Int) -&gt;Bool&#123;</span><br><span class="line">        <span class="keyword">if</span> LevelTracker.levelIsUnlocked(level)&#123;</span><br><span class="line">            currentLevel = level</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Player &#123;</span><br><span class="line">    var tracker = LevelTracker()</span><br><span class="line">    let playName : String</span><br><span class="line">    func completedLevel(level:Int)&#123;</span><br><span class="line">        LevelTracker.unlockLevel(level+<span class="number">1</span>)<span class="comment">//调用结构体类方法</span></span><br><span class="line">        tracker.advanceToLevel(level+<span class="number">1</span>) <span class="comment">//调用了tracker的实例advanceToLevel</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    init(name:String)&#123;</span><br><span class="line">        playName = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var player = Player(name:<span class="string">"World"</span>)</span><br><span class="line">player.completedLevel(<span class="number">1</span>)<span class="comment">//调用后 tarcker的highestUnlockedLevel变成2</span></span><br><span class="line">println(<span class="string">"highest unlocked level is now \(LevelTracker.highestUnlockedLevel)"</span>)</span><br><span class="line"></span><br><span class="line">var player2 = Player(name:<span class="string">"Kitty"</span>)</span><br><span class="line"><span class="keyword">if</span> player2.tracker.advanceToLevel(<span class="number">6</span>)&#123;</span><br><span class="line">    println(<span class="string">"player is not on level 6"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    println(<span class="string">"level 6 has not yet been unlocked"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/16/2014-7-16-Swift-Methods/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Methods/">Methods</a>►<a class="article-category-link" href="/categories/Swift/Methods/方法/">方法</a>►<a class="article-category-link" href="/categories/Swift/Methods/方法/实例方法/">实例方法</a>►<a class="article-category-link" href="/categories/Swift/Methods/方法/实例方法/类方法/">类方法</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/16/2014-7-16-Swift-Methods/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/16/2014-7-16-Swift-Methods/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/15/2014-7-15-Swift-Properties/" title="《浅入浅出Swift》Properties 属性" itemprop="url">《浅入浅出Swift》Properties 属性</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-15T14:10:00.000Z" itemprop="datePublished"> Published 2014-07-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Properties</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//存储属性，Stored Properties</span></span><br><span class="line">        <span class="comment">//下面的例子定义了一个称为FixedLengthRange结构,描述了一个范围的整数范围长度,一旦创建不能改变:</span></span><br><span class="line">        <span class="keyword">struct</span> FixedLengthRange&#123;</span><br><span class="line">            var firstValue:Int</span><br><span class="line">            let length:Int</span><br><span class="line">        &#125;</span><br><span class="line">        var rangeOfThreeItems = FixedLengthRange(firstValue:<span class="number">0</span>, length: <span class="number">3</span>)</span><br><span class="line">        <span class="comment">//the range represents integer values 0,1 and 2</span></span><br><span class="line">        rangeOfThreeItems.firstValue = <span class="number">6</span></span><br><span class="line">        <span class="comment">//the range now represents integer values 6,7 and 8</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//存储属性不变结构的实列，Stored Properties of Constant Structure Instances</span></span><br><span class="line">        <span class="comment">//如果您创建一个结构的实例,并将该实例分配给一个常量,您不能修改实例的属性,即使他们被声明为变量属性:</span></span><br><span class="line">        let rangeOfFourItems = FixedLengthRange(firstValue: <span class="number">0</span>, length: <span class="number">4</span>)</span><br><span class="line">        <span class="comment">//this range represents integer values 0,1,2 and 3</span></span><br><span class="line"><span class="comment">//        rangeOfFourItems.firstValue = 6  //&lt;---error</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//懒惰的存储属性，Lazy Stored Properties</span></span><br><span class="line">        class DataImporter&#123;</span><br><span class="line">            var fileName = <span class="string">"data.text"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//xcode6 beta3 有点问题</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        class DataManager &#123;</span><br><span class="line">            @lazy var importer = DataImporter()</span><br><span class="line">            var data = [String]()</span><br><span class="line">        &#125;</span><br><span class="line">        let manager = DataManager()</span><br><span class="line">        manager.data += "Some data"</span><br><span class="line">        manager.data += "Some more data"</span><br><span class="line">        println("manager.data = \(manager.data)")</span><br><span class="line">        println(manager.importer.fileName)</span><br><span class="line">        */</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//用于计算的属性，Computed Properties</span></span><br><span class="line">        <span class="comment">//这种属性本身并不会保存数值，而是提供了一个getter和一个可选的setter方法，来间接的设置其它属性的值。</span></span><br><span class="line">        <span class="comment">//点</span></span><br><span class="line">        <span class="keyword">struct</span> Point&#123;</span><br><span class="line">            var x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//尺寸</span></span><br><span class="line">        <span class="keyword">struct</span> Size &#123;</span><br><span class="line">            var width = <span class="number">0.0</span>, height = <span class="number">0.0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">struct</span> Rect &#123;</span><br><span class="line">            <span class="comment">//在Rect结构体中有一个center属性，还有一个origin属性和size属性</span></span><br><span class="line">            <span class="comment">//而center属性是完全可以通过origin和size计算得到，并不需要存储</span></span><br><span class="line">            <span class="comment">//反过来，只移动center的话，那么要根据center点和size值就可以计算出新的origin属性的的值。</span></span><br><span class="line">            <span class="comment">//所以center不需要保存什么值，用于计算而非用于存储的属性</span></span><br><span class="line">            <span class="comment">//起始点</span></span><br><span class="line">            var origin = Point()</span><br><span class="line">            var size = Size()</span><br><span class="line">            var center : Point &#123;</span><br><span class="line">            get &#123;</span><br><span class="line">                let centerX = origin.x + (size.width/<span class="number">2</span>)</span><br><span class="line">                let centerY = origin.y + (size.height/<span class="number">2</span>)</span><br><span class="line">                <span class="keyword">return</span> Point(x: centerX, y: centerY)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//为set提供了一个参数newCenter，而这个参数可以被省略，</span></span><br><span class="line">            <span class="comment">//未省略</span></span><br><span class="line"><span class="comment">//            set (newCenter)&#123;</span></span><br><span class="line"><span class="comment">//                origin.x = newCenter.x-(size.width/2)</span></span><br><span class="line"><span class="comment">//                origin.y = newCenter.y-(size.height/2)</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line">            <span class="comment">//省略</span></span><br><span class="line">            set &#123;</span><br><span class="line">                origin.x = newValue.x-(size.width/<span class="number">2</span>)</span><br><span class="line">                origin.y = newValue.y-(size.height/<span class="number">2</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        var square = Rect(origin: Point(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>), size: Size(width: <span class="number">10</span>, height: <span class="number">10.0</span>))</span><br><span class="line">        let initialSquareCenter = square.center</span><br><span class="line">        square.center = Point(x:<span class="number">15.0</span>,y:<span class="number">15.0</span>)</span><br><span class="line">        println(<span class="string">"square.origin is now at (\(square.origin.x),\(square.origin.y))"</span>)</span><br><span class="line">        <span class="comment">// prints "square.origin is now at (10.0, 10.0)"</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Shorthand Setter Declaration</span></span><br><span class="line">        <span class="keyword">struct</span> AlternativeRect &#123;</span><br><span class="line">            var origin = Point()</span><br><span class="line">            var size = Size()</span><br><span class="line">            var center: Point &#123;</span><br><span class="line">            get &#123;</span><br><span class="line">                let centerX = origin.x + (size.width / <span class="number">2</span>)</span><br><span class="line">                let centerY = origin.y + (size.height / <span class="number">2</span>)</span><br><span class="line">                <span class="keyword">return</span> Point(x: centerX, y: centerY)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//省略参数记为newValue</span></span><br><span class="line">            set &#123;</span><br><span class="line">                origin.x = newValue.x - (size.width / <span class="number">2</span>)</span><br><span class="line">                origin.y = newValue.y - (size.height / <span class="number">2</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//只读Read-Only Computed Properties</span></span><br><span class="line">        <span class="comment">//只读用于计算的属性，我们可以省掉get</span></span><br><span class="line">        <span class="keyword">struct</span> Cuboid&#123;</span><br><span class="line">            var width = <span class="number">0.0</span>, height = <span class="number">0.0</span>, depth = <span class="number">0.0</span></span><br><span class="line">            var volume : Double&#123;</span><br><span class="line">                <span class="keyword">return</span> width*height*depth</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let fourByFiveByTwo = Cuboid(width: <span class="number">4.0</span>, height: <span class="number">5.0</span>, depth: <span class="number">2.0</span>)</span><br><span class="line">        println(<span class="string">"the volume of fourByFiveByTwo is \(fourByFiveByTwo)"</span>)</span><br><span class="line">        <span class="comment">// prints "the volume of fourByFiveByTwo is 40.0"</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//属性观察员Property Observers</span></span><br><span class="line">        <span class="comment">//是在它监控的那个属性被设置时触发的，即使这个属性的新值和原值是一样的</span></span><br><span class="line">        <span class="comment">//willSet 在属性被设置新值，但还没有保存的时候，被调用</span></span><br><span class="line">        <span class="comment">//didSet 在属性保存了新值后立即被调用</span></span><br><span class="line">        <span class="comment">//属性第一次被初始化的时候不会被调用</span></span><br><span class="line">        class StepCounter&#123;</span><br><span class="line">            <span class="comment">//闭包</span></span><br><span class="line">            var totalSteps : Int = <span class="number">0</span>&#123;</span><br><span class="line">                willSet(newTotalSteps)&#123;</span><br><span class="line">                    println(<span class="string">"About to set totalSteps to \(newTotalSteps)"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                didSet&#123;</span><br><span class="line">                    <span class="comment">//swift提供oldValue</span></span><br><span class="line">                    <span class="keyword">if</span> totalSteps &gt; oldValue&#123;</span><br><span class="line">                        println(<span class="string">"Added \(totalSteps-oldValue) steps"</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let stepCounter = StepCounter()</span><br><span class="line">        stepCounter.totalSteps = <span class="number">200</span></span><br><span class="line">        <span class="comment">//set totalSteps to 200</span></span><br><span class="line">        <span class="comment">//added 200 steps</span></span><br><span class="line">        stepCounter.totalSteps = <span class="number">360</span></span><br><span class="line">        <span class="comment">//set totalSteps to 360</span></span><br><span class="line">        <span class="comment">//added 160 steps</span></span><br><span class="line">        stepCounter.totalSteps = <span class="number">896</span></span><br><span class="line">        <span class="comment">//set totalSteps to 896</span></span><br><span class="line">        <span class="comment">//added 536 steps</span></span><br><span class="line">        class TestClass&#123;</span><br><span class="line">            var num:Int=<span class="number">0</span>&#123;</span><br><span class="line">            willSet&#123;</span><br><span class="line">                println(<span class="string">"testClass willSet = \(num)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            didSet &#123;</span><br><span class="line">                num = oldValue<span class="comment">//赋值为0，所有输出为0</span></span><br><span class="line">                println(<span class="string">"testClass didSet = \(num)"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        var testClass = TestClass()</span><br><span class="line">        testClass.num = <span class="number">8</span></span><br><span class="line">        println(<span class="string">"testClass = \(testClass.num)"</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//全局常量、变量，也都可以设置用于计算的属性，Global and Local Variables</span></span><br><span class="line">        var Q_myNum = <span class="number">0</span></span><br><span class="line">        var Q_myValue:Int&#123;</span><br><span class="line">            <span class="keyword">return</span> Q_myNum</span><br><span class="line">        &#125;</span><br><span class="line">        println(<span class="string">"Q_myNum = \(Q_myValue)"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//类型属性，Type Property Syntax</span></span><br><span class="line">        <span class="comment">//类似c/c++中的静态变量，所有实例共享一份拷贝，而不是每一个实例都有一份</span></span><br><span class="line">        <span class="comment">//swift依然用了static这个关键字，类中用class关键字</span></span><br><span class="line">        <span class="keyword">struct</span> SomeStructure&#123;</span><br><span class="line">            <span class="keyword">static</span> var storedTypeProperty = <span class="string">"Some value."</span></span><br><span class="line">            <span class="keyword">static</span> var computedTypeProperty: Int &#123;</span><br><span class="line">                <span class="comment">//return an Int value here</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">enum</span> SomeEnumeration&#123;</span><br><span class="line">            <span class="keyword">static</span> var storedTypeProperty = <span class="string">"Some value."</span></span><br><span class="line">            <span class="keyword">static</span> var computedTypeProperty : Int&#123;</span><br><span class="line">                <span class="comment">//return an Int value here</span></span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class SomeClass&#123;</span><br><span class="line">            class var computedTypeProperty: Int&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//查询和设置类型属性Querying and Setting Type Properties</span></span><br><span class="line">        println(<span class="string">"SomeClass.computedTypeProperty = \(SomeClass.computedTypeProperty)"</span>)</span><br><span class="line">        println(SomeStructure.storedTypeProperty)</span><br><span class="line">        SomeStructure.storedTypeProperty = <span class="string">"Another value."</span></span><br><span class="line">        println(SomeStructure.storedTypeProperty)</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/15/2014-7-15-Swift-Properties/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Properties/">Properties</a>►<a class="article-category-link" href="/categories/Swift/Properties/属性/">属性</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/15/2014-7-15-Swift-Properties/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/15/2014-7-15-Swift-Properties/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/14/2014-7-14-Swift-ClassesAndStructures/" title="《浅入浅出Swift》Classes And Structures 类和结构体" itemprop="url">《浅入浅出Swift》Classes And Structures 类和结构体</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-14T14:50:00.000Z" itemprop="datePublished"> Published 2014-07-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Classes And Structures</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//不会像c++那样用struct取代class关键字</span></span><br><span class="line">        <span class="comment">//swift可以把class和结构体定义在一个.swift里，然后在其他文件里直接用就可以了</span></span><br><span class="line">        <span class="comment">//不需要include，也不需要import</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//1允许一个类继承另一个类的特点</span></span><br><span class="line">        <span class="comment">//2允许在运行类实例时，检查和解释类型</span></span><br><span class="line">        <span class="comment">//3使一个类的实例能够释放任何资源分配</span></span><br><span class="line">        <span class="comment">//4引用计数允许多个引用一个类实例</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//定义语法，definition syntax</span></span><br><span class="line">        <span class="comment">//类和结构体定义首字母大写</span></span><br><span class="line">        class SomeClass&#123;</span><br><span class="line">            var typeName = <span class="string">"class"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">struct</span> SomeStructure &#123;</span><br><span class="line">            var typeName = <span class="string">"struct"</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        var myFirstClass = SomeClass(typeName:"")//类不行</span></span><br><span class="line">        var myFirstClass = SomeClass()<span class="comment">//定义一个变量，它是SomeClass类型的实例</span></span><br><span class="line">        println(myFirstClass.typeName)<span class="comment">//访问这个实例的成员属性</span></span><br><span class="line">        <span class="comment">//结构体有特别之处，在初始化的时候，可以把成员的值直接写在参数里面</span></span><br><span class="line">        var myFirstStr = SomeStructure(typeName:<span class="string">"my first struct"</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">struct</span> Resolution&#123;</span><br><span class="line">            var width = <span class="number">0</span></span><br><span class="line">            var height = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        class VideoMode &#123;</span><br><span class="line">            var resolution = Resolution()<span class="comment">//定义变量resolution，他是Resolution类型的实例</span></span><br><span class="line">            var interlaced = <span class="literal">false</span></span><br><span class="line">            var frameRate = <span class="number">0.0</span></span><br><span class="line">            var name : String = <span class="string">""</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//类和结构实例，Class and Structure Instances</span></span><br><span class="line">        let someResolution = Resolution()</span><br><span class="line">        let someVideoMode = VideoMode()</span><br><span class="line">        <span class="comment">//访问属性，Accessing Properties</span></span><br><span class="line">        println(<span class="string">"The width of someResolution is \(someResolution.width)"</span>)</span><br><span class="line">        println(<span class="string">"The width of someVideoMode is \(someVideoMode.resolution.width)"</span>)</span><br><span class="line">        <span class="comment">//点语法</span></span><br><span class="line">        someVideoMode.resolution.width = <span class="number">1280</span></span><br><span class="line">        println(<span class="string">"The width of someVideoMode is now \(someVideoMode.resolution.width)"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//为结构类型初始值设定项，Memberwise Initializers for Structure Types</span></span><br><span class="line">        let vga = Resolution(width: <span class="number">650</span>, height: <span class="number">480</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//结构和枚举值类型，Structures and Enumerations Are Value Types</span></span><br><span class="line">        let hd = Resolution(width: <span class="number">1920</span>, height: <span class="number">1080</span>)</span><br><span class="line">        var cinema = hd</span><br><span class="line">        cinema.width = <span class="number">2048</span></span><br><span class="line">        println(<span class="string">"cinema.width now = \(cinema.width)"</span>)</span><br><span class="line">        <span class="comment">//However, the width property of the original hd instance still has the old value of 1920:</span></span><br><span class="line">        println(<span class="string">"hd.width now = \(hd.width)"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//同样的行为也适用于枚举，The same behavior applies to enumerations:</span></span><br><span class="line">        <span class="keyword">enum</span> CompassPoint&#123;</span><br><span class="line">            <span class="keyword">case</span> North,South,East,West</span><br><span class="line">        &#125;</span><br><span class="line">        var currentDirection = CompassPoint.West</span><br><span class="line">        let rememberedDirection = currentDirection</span><br><span class="line">        currentDirection = .East</span><br><span class="line">        <span class="keyword">if</span> rememberedDirection == .West &#123;</span><br><span class="line">            println(<span class="string">"The remembered direction is still .West"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//类是引用类型，Classes Are Reference Types</span></span><br><span class="line">        <span class="comment">//这个例子声明一个新的常数称为tenEighty并集参考VideoMode类的一个新实例</span></span><br><span class="line">        <span class="comment">//视频模式分配一份高清分辨为1920到1080之前，它是交错的，名称是“1080i”，最后它被设置成25.0帧每秒的帧速率</span></span><br><span class="line">        let tenEighty = VideoMode()</span><br><span class="line">        tenEighty.resolution = hd</span><br><span class="line">        tenEighty.interlaced = <span class="literal">true</span></span><br><span class="line">        tenEighty.name = <span class="string">"1080i"</span></span><br><span class="line">        tenEighty.frameRate = <span class="number">25.0</span></span><br><span class="line">        </span><br><span class="line">        let alsoTenEighty = tenEighty</span><br><span class="line">        alsoTenEighty.frameRate = <span class="number">30.0</span></span><br><span class="line">        println(<span class="string">"now frameRate = \(alsoTenEighty.frameRate)"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//标识操作符，Identity Operators</span></span><br><span class="line">        <span class="comment">//用来判断两个变量或常量，是否同时引用同一个类的实例，相同的 === 不相同的 !==</span></span><br><span class="line">        <span class="keyword">if</span> tenEighty === alsoTenEighty&#123;</span><br><span class="line">            println(<span class="string">"tenEighty and alsoTenEighty refer to the same VideoMode instance"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Array和Dictionar都是Struct</span></span><br><span class="line">        var myDictionary = [<span class="number">1</span>:<span class="string">"1"</span>,<span class="number">2</span>:<span class="string">"2"</span>,<span class="number">3</span>:<span class="string">"3"</span>]</span><br><span class="line">        var myDictionaryCopy = myDictionary;</span><br><span class="line">        </span><br><span class="line">        myDictionary[<span class="number">1</span>] = <span class="string">"8"</span></span><br><span class="line">        println(myDictionaryCopy[<span class="number">1</span>])<span class="comment">// ＝ 1</span></span><br><span class="line">        </span><br><span class="line">        var myArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">        var myArrayCopy = myArray</span><br><span class="line">        myArray[<span class="number">1</span>] = <span class="number">8</span></span><br><span class="line">        println(myArray[<span class="number">1</span>]) <span class="comment">//得到结果是8</span></span><br><span class="line">        println(myArray === myArrayCopy)<span class="comment">//false</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//swift对Array做了优化，只有在必要时，才会分配一份拷贝</span></span><br><span class="line">        <span class="comment">//Array只有在数组长度变化的时候才拷贝</span></span><br><span class="line">        <span class="comment">//1 unshare() arr变 newArr不变 Xcode6 beta1,2</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        var arr = [0,0,0]</span><br><span class="line">        var newArr = arr</span><br><span class="line">        arr.unshare()</span><br><span class="line">        arr[0] = 1</span><br><span class="line">        arr       //[1, 0, 0]  </span><br><span class="line">        newArr    //[0, 0, 0]</span><br><span class="line">        */</span></span><br><span class="line">        <span class="comment">//2 copy() 直接拷贝 arr变，newArr不变 Xcode6 beta1,2</span></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        var arr = [0,0,0]</span><br><span class="line">        var copiedArr = arr.copy()</span><br><span class="line">        arr[0] = 1</span><br><span class="line">        arr       //[1, 0, 0]</span><br><span class="line">        copiedArr //[0, 0, 0]</span><br><span class="line">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//值类型特点</span></span><br><span class="line">        var arr = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line"><span class="comment">//        arr[0]=1//arr = [1,0,0], newArr =[1,0,0]</span></span><br><span class="line">        var newArr = arr<span class="comment">//Xcode6 beta3 newArr = [0,0,0], beta1,2 newArr = [1,0,0]</span></span><br><span class="line">        arr[<span class="number">0</span>]=<span class="number">1</span><span class="comment">//arr = [1,0,0], newArr =[0,0,0]</span></span><br><span class="line">        println(arr)</span><br><span class="line">        println(newArr)</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/14/2014-7-14-Swift-ClassesAndStructures/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Classes/">Classes</a>►<a class="article-category-link" href="/categories/Swift/Classes/Structures/">Structures</a>►<a class="article-category-link" href="/categories/Swift/Classes/Structures/类/">类</a>►<a class="article-category-link" href="/categories/Swift/Classes/Structures/类/结构体/">结构体</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/14/2014-7-14-Swift-ClassesAndStructures/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/14/2014-7-14-Swift-ClassesAndStructures/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/12/2014-7-12-Swift-Enumerations/" title="《浅入浅出Swift》Enumerations 枚举" itemprop="url">《浅入浅出Swift》Enumerations 枚举</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-11T16:10:00.000Z" itemprop="datePublished"> Published 2014-07-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Enumerations</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//首字母大写</span></span><br><span class="line">        <span class="keyword">enum</span> SomeEnumeration&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        enum CompassPoint&#123;</span><br><span class="line">            case North</span><br><span class="line">            case South</span><br><span class="line">            case East</span><br><span class="line">            case West</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line">        <span class="comment">//or</span></span><br><span class="line">        <span class="keyword">enum</span> CompassPoint&#123;</span><br><span class="line">            <span class="keyword">case</span> North,South,East,West</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">enum</span> Planet &#123;</span><br><span class="line">            <span class="keyword">case</span> Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//既然是类型,就用enum定义变量</span></span><br><span class="line">        var directionToHead = CompassPoint.West</span><br><span class="line">        <span class="comment">//初始化了CompassPoint后，就不再需要再写枚举的类型了</span></span><br><span class="line">        directionToHead = .East</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//switch中也是类似</span></span><br><span class="line">        <span class="keyword">switch</span> directionToHead&#123;</span><br><span class="line">        <span class="keyword">case</span> .North:println(<span class="string">"Lots of planets have a north"</span>)</span><br><span class="line">        <span class="keyword">case</span> .South:println(<span class="string">"Watch out for penguins"</span>)</span><br><span class="line">        <span class="keyword">case</span> .East:println(<span class="string">"Where the sun rises"</span>)</span><br><span class="line">        <span class="keyword">case</span> .West:println(<span class="string">"Where the skies are blue"</span>)</span><br><span class="line">        <span class="comment">//prints "Where the sun rises"</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        let somePlanet = Planet.Earth</span><br><span class="line">        <span class="keyword">switch</span> somePlanet&#123;</span><br><span class="line">        <span class="keyword">case</span> .Earth:println(<span class="string">"Mostly harmless"</span>)</span><br><span class="line">        <span class="keyword">default</span>:println(<span class="string">"Not a safe place for humans"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//关联值，Associated Values</span></span><br><span class="line">        <span class="comment">//Barcod不存储任何东西，仅仅定义了类型，需要再定义变量</span></span><br><span class="line">        <span class="keyword">enum</span> Barcode&#123;</span><br><span class="line">            <span class="keyword">case</span> UPCA(Int,Int,Int,Int)</span><br><span class="line">            <span class="keyword">case</span> QRCode(String)</span><br><span class="line">        &#125;</span><br><span class="line">        var productBarcode = Barcode.UPCA(<span class="number">8</span>, <span class="number">85909</span>, <span class="number">51226</span>, <span class="number">3</span>)</span><br><span class="line">        productBarcode = .QRCode(<span class="string">"ABCDEFGHIJKLMNOP"</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        switch productBarcode&#123;</span></span><br><span class="line"><span class="comment">//            case .UPCA(let numberSystem, let manufacturer, let product, let check):</span></span><br><span class="line"><span class="comment">//            println("UPC-A: \(numberSystem),\(manufacturer),\(product),\(check)")</span></span><br><span class="line"><span class="comment">//            case .QRCode(let productCde):</span></span><br><span class="line"><span class="comment">//            println("QR code:\(productBarcode)")</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//值是var or let 可以提前</span></span><br><span class="line">        <span class="keyword">switch</span> productBarcode&#123;</span><br><span class="line">        <span class="keyword">case</span> let .UPCA(numberSystem, manufacturer, product, check):</span><br><span class="line">            println(<span class="string">"UPC-A: \(numberSystem),\(manufacturer),\(product),\(check)"</span>)</span><br><span class="line">        <span class="keyword">case</span> let .QRCode(productCde):</span><br><span class="line">            println(<span class="string">"QR code:\(productBarcode)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//可以为enum定义值，Raw Values</span></span><br><span class="line">        <span class="keyword">enum</span> AS<span class="built_in">CIIControlCharacter</span> :Character&#123;</span><br><span class="line">            <span class="keyword">case</span> Tab = <span class="string">"\t"</span>, LineFeed = <span class="string">"\n"</span>, CarriageReturn = <span class="string">"\r"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">enum</span> NewPlanet:Int&#123;</span><br><span class="line">            <span class="keyword">case</span> Mercury = <span class="number">1</span>, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//toRaw 取到枚举的值</span></span><br><span class="line">        let earthsOrder = NewPlanet.Earth.toRaw()</span><br><span class="line">        println(<span class="string">"earthsOrder 取值 ＝ \(earthsOrder)"</span>)</span><br><span class="line">        <span class="comment">//fromRaw 通过值取到NewPlanet成员</span></span><br><span class="line">        let possiblePlanet = NewPlanet.fromRaw(<span class="number">7</span>)</span><br><span class="line">        println(<span class="string">"possiblePlanet 取枚举 = \(possiblePlanet)"</span>)</span><br><span class="line">        </span><br><span class="line">        var whichPlanet: NewPlanet? = NewPlanet.fromRaw(<span class="number">10000</span>)</span><br><span class="line">        println(<span class="string">"whichPlanet = \(whichPlanet)"</span>)</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/12/2014-7-12-Swift-Enumerations/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Enumerations/">Enumerations</a>►<a class="article-category-link" href="/categories/Swift/Enumerations/枚举/">枚举</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/12/2014-7-12-Swift-Enumerations/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/12/2014-7-12-Swift-Enumerations/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/11/2014-7-11-Swift-Closures/" title="《浅入浅出Swift》Closures 闭包" itemprop="url">《浅入浅出Swift》Closures 闭包</a>
  </h1>
  <p class="article-time">
    <time datetime="2014-07-11T15:02:00.000Z" itemprop="datePublished"> Published 2014-07-11</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>####Closures</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Function中的全局函数和嵌套函数，全是闭包的特殊形式</span></span><br><span class="line">        <span class="comment">//所谓闭包表达式，就是一个不带函数名的嵌套函数，书写方式比较特别</span></span><br><span class="line">        <span class="comment">//Global functions are closures that have a name and do not capture any values.</span></span><br><span class="line"><span class="comment">//        Nested functions are closures that have a name and can capture values from their enclosing function.</span></span><br><span class="line"><span class="comment">//        Closure expressions are unnamed closures written in a lightweight syntax that can capture values from their surrounding context.</span></span><br><span class="line">        <span class="comment">//闭包的“优化”包含：</span></span><br><span class="line">        <span class="comment">//能够根据上下文推理出来的参数 以及函数的返回值类型</span></span><br><span class="line">        <span class="comment">//return关键字</span></span><br><span class="line">        <span class="comment">//变量名</span></span><br><span class="line">        <span class="comment">//Trailing closure syntax</span></span><br><span class="line">        let names = [<span class="string">"Chris"</span>,<span class="string">"Alex"</span>,<span class="string">"Ewa"</span>,<span class="string">"Barry"</span>,<span class="string">"Daniella"</span>]</span><br><span class="line">        func backwards(s1:String, s2:String) -&gt; Bool &#123;</span><br><span class="line">            <span class="keyword">return</span> s1 &gt; s2</span><br><span class="line">        &#125;</span><br><span class="line">        var reversed = sorted(names, backwards)</span><br><span class="line">        println(<span class="string">"reversed is equal to \(reversed)"</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        Closure Expression Syntax</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            (参数)-&gt;返回值类型 in 函数体</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        reversed = sorted(names, &#123; (s1:String, s2:String) -&gt; Bool <span class="keyword">in</span> <span class="keyword">return</span> s1 &gt; s2&#125;)</span><br><span class="line">        <span class="comment">//Inferring Type From Context</span></span><br><span class="line">        reversed = sorted(names, &#123;s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1&gt;s2&#125;)</span><br><span class="line">        <span class="comment">//Implicit Returns from Single-Expression Closures 从闭包隐士返回</span></span><br><span class="line">        reversed = sorted(names, &#123;s1, s2 <span class="keyword">in</span> s1 &gt; s2&#125;)</span><br><span class="line">        <span class="comment">//Shorthand Argument Names，对于inline的闭包</span></span><br><span class="line">        reversed = sorted(names, &#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;)</span><br><span class="line">        <span class="comment">//Operator Functions</span></span><br><span class="line">        reversed = sorted(names, &gt;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Trailing Closures</span></span><br><span class="line">        func someFunctionThatTakesAClosure(closure:() -&gt; () )&#123;</span><br><span class="line">            <span class="comment">//func body goes here</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// here's how you call this function without using a trailing closure:</span></span><br><span class="line">        someFunctionThatTakesAClosure(&#123;</span><br><span class="line">            <span class="comment">//空闭包 &#123;&#125;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        someFunctionThatTakesAClosure()&#123;&#125;<span class="comment">//如果闭包&#123;&#125; 内容很长，我们可以吧&#123;&#125;放在()的外面</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//reversed还可以这样写</span></span><br><span class="line">        reversed = sorted(names)&#123;$<span class="number">0</span> &gt; $<span class="number">1</span>&#125;</span><br><span class="line">        </span><br><span class="line">        let digitNames = [<span class="number">0</span>: <span class="string">"Zero"</span>, <span class="number">1</span>: <span class="string">"One"</span>, <span class="number">2</span>: <span class="string">"Two"</span>,   <span class="number">3</span>: <span class="string">"Three"</span>, <span class="number">4</span>: <span class="string">"Four"</span>,</span><br><span class="line">            <span class="number">5</span>: <span class="string">"Five"</span>, <span class="number">6</span>: <span class="string">"Six"</span>, <span class="number">7</span>: <span class="string">"Seven"</span>, <span class="number">8</span>: <span class="string">"Eight"</span>, <span class="number">9</span>: <span class="string">"Nine"</span>]</span><br><span class="line">        let numbers = [<span class="number">16</span>,<span class="number">58</span>,<span class="number">510</span>]</span><br><span class="line">        let strings = numbers.map()&#123;</span><br><span class="line">            <span class="comment">//参数number 返回值String in后函数体</span></span><br><span class="line">            (var number) -&gt; String <span class="keyword">in</span></span><br><span class="line">            var output = <span class="string">""</span></span><br><span class="line">            <span class="keyword">while</span> number &gt; <span class="number">0</span>&#123;</span><br><span class="line">                <span class="comment">//16大于0 58, 510</span></span><br><span class="line">                output = digitNames[number % <span class="number">10</span>]! + output</span><br><span class="line">                println(<span class="string">"output = \(output)"</span>)</span><br><span class="line">                number /= <span class="number">10</span> <span class="comment">// = 1, = 5, = 51, = 5</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> output</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//string is inferred to be of type [String]</span></span><br><span class="line">        <span class="comment">//["OneSix", "FiveEight", "FiveOneZero"]:</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取值，Capturing Values</span></span><br><span class="line">        <span class="comment">//闭包可以捕捉并保存它的外层函数的常量和变量</span></span><br><span class="line">        func makeIncrementor(forIncrement amount:Int)-&gt; ()-&gt;Int &#123;<span class="comment">//返回一个函数</span></span><br><span class="line">            var runningTotal = <span class="number">0</span></span><br><span class="line">            func incrementor ()-&gt; Int &#123;</span><br><span class="line">                runningTotal += amount</span><br><span class="line">                println(<span class="string">"return a value of \(runningTotal)"</span>)</span><br><span class="line">                <span class="keyword">return</span> runningTotal</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> incrementor</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//incrementor是一个嵌套函数，返回一个Int，它没有传入参数，而是使用makeIncrementor函数定义的一个runningTotal局部变量，当makeIncrementor，返回incrementor函数时，实际上返回了incrementor函数的一个复制出来的实体函数名，每次调用makeIncrementor的时候都会复制一个新的incrementor函数，正因为闭包可以保存它外层函数定义的常量和变量，所以当外层函数的作用域已不存在的时候，它依然可以使用那个常量或变量的值</span></span><br><span class="line">        let incrementByTen = makeIncrementor(forIncrement: <span class="number">10</span>)</span><br><span class="line">        incrementByTen()<span class="comment">//10</span></span><br><span class="line">        incrementByTen()<span class="comment">//20</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//闭包是引用类型，Closures Are Reference Types</span></span><br><span class="line">        let alsoIncrementByTen = incrementByTen</span><br><span class="line">        alsoIncrementByTen()<span class="comment">//30</span></span><br><span class="line">        <span class="comment">//没有调用makeIncrementor去复制一个新的函数，而是定义了一个常量alsoIncrementByTen被赋值成了incrementByTen</span></span><br><span class="line">        <span class="comment">//正因为闭包是引用类型，alsoIncrementByTen就是incrementByTen之前复制出来的函数的新引用而已。</span></span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
            <a href="/2014/07/11/2014-7-11-Swift-Closures/#more">Read More</a>
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Swift/">Swift</a>►<a class="article-category-link" href="/categories/Swift/Closures/">Closures</a>►<a class="article-category-link" href="/categories/Swift/Closures/闭包/">闭包</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/07/11/2014-7-11-Swift-Closures/#comments" class="ds-thread-count comments-count-link" data-thread-key="2014/07/11/2014-7-11-Swift-Closures/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="iceesj" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/AddressBook/CFErrorRef/ABRecordRef/ABAddressBookRef/" title="ABAddressBookRef">ABAddressBookRef<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AddressBook/CFErrorRef/ABRecordRef/" title="ABRecordRef">ABRecordRef<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/ARC/" title="ARC">ARC<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AVFoundation/" title="AVFoundation">AVFoundation<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AddressBook/" title="AddressBook">AddressBook<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Advanced-Operators/" title="Advanced Operators">Advanced Operators<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Appsupport/" title="Appsupport">Appsupport<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Array/" title="Array">Array<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Block/" title="Block">Block<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AddressBook/CFErrorRef/" title="CFErrorRef">CFErrorRef<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPanGestureRecognizer/UILabel/CGRect/" title="CGRect">CGRect<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/CLLocation/CLPlacemark/CLGeocoder/" title="CLGeocoder">CLGeocoder<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/CLLocation/" title="CLLocation">CLLocation<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/CLLocation/CLPlacemark/" title="CLPlacemark">CLPlacemark<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Classes/" title="Classes">Classes<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Closures/" title="Closures">Closures<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIRefreshControl/NSEC-PER-SEC/DISPATCH-TIME-NOW/" title="DISPATCH_TIME_NOW">DISPATCH_TIME_NOW<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Array/Dictionary/" title="Dictionary">Dictionary<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Enumerations/" title="Enumerations">Enumerations<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Extensions/" title="Extensions">Extensions<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Block/NSThread/GCD/" title="GCD">GCD<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSBundle/Security/GCD/" title="GCD">GCD<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Generics/" title="Generics">Generics<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Inheritance/" title="Inheritance">Inheritance<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Initialization/" title="Initialization">Initialization<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Introduction/" title="Introduction">Introduction<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AVFoundation/NSNotification/MPMediaPickerController/" title="MPMediaPickerController">MPMediaPickerController<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AVFoundation/NSNotification/MPMediaPickerController/MPMusicPlayerController/" title="MPMusicPlayerController">MPMusicPlayerController<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Methods/" title="Methods">Methods<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MobileCoreServices/" title="MobileCoreServices">MobileCoreServices<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSBundle/" title="NSBundle">NSBundle<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIRefreshControl/NSEC-PER-SEC/" title="NSEC_PER_SEC">NSEC_PER_SEC<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSFileManager/" title="NSFileManager">NSFileManager<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/dispatch-time/NSIndexPath/" title="NSIndexPath">NSIndexPath<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSLayoutConstraint/NSLayoutAttributeCenterX/" title="NSLayoutAttributeCenterX">NSLayoutAttributeCenterX<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSLayoutConstraint/NSLayoutAttributeCenterX/NSLayoutAttributeCenterY/" title="NSLayoutAttributeCenterY">NSLayoutAttributeCenterY<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSLayoutConstraint/" title="NSLayoutConstraint">NSLayoutConstraint<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSLayoutConstraint/NSLayoutAttributeCenterX/NSLayoutAttributeCenterY/NSLayoutRelationEqual/" title="NSLayoutRelationEqual">NSLayoutRelationEqual<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/dispatch-time/NSIndexPath/removeObject/insertObject/NSMutableArray/" title="NSMutableArray">NSMutableArray<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSMutableAttributedString/" title="NSMutableAttributedString">NSMutableAttributedString<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/enumerateKeysAndObjectsUsingBlock/enumerateObjectsUsingBlock/deleteRowsAtIndexPaths/NSNotFound/" title="NSNotFound">NSNotFound<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/AVFoundation/NSNotification/" title="NSNotification">NSNotification<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Block/NSThread/" title="NSThread">NSThread<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSTimer/UIBackgroundTaskIdentifier/NSTimeInterval/" title="NSTimeInterval">NSTimeInterval<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Block/NSThread/GCD/NSTimer/" title="NSTimer">NSTimer<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSTimer/" title="NSTimer">NSTimer<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/NestedTypes/" title="NestedTypes">NestedTypes<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Optional-Chaining/" title="Optional Chaining">Optional Chaining<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Properties/" title="Properties">Properties<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Protocols/" title="Protocols">Protocols<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSBundle/Security/" title="Security">Security<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UINavigationController/UIKit/Storyboard/" title="Storyboard">Storyboard<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITabBarController/UIKit/Storyboard/" title="Storyboard">Storyboard<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/String/" title="String">String<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Classes/Structures/" title="Structures">Structures<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Subscripts/" title="Subscripts">Subscripts<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/" title="Swift">Swift<sup>22</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/TypeCasting/" title="TypeCasting">TypeCasting<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIActivityViewController/" title="UIActivityViewController">UIActivityViewController<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIAlertView/" title="UIAlertView">UIAlertView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIAttachmentBehavior/" title="UIAttachmentBehavior">UIAttachmentBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSTimer/UIBackgroundTaskIdentifier/" title="UIBackgroundTaskIdentifier">UIBackgroundTaskIdentifier<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIBarButtonItem/" title="UIBarButtonItem">UIBarButtonItem<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIBarButtonItem/UIButton/" title="UIButton">UIButton<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSLayoutConstraint/UIButton/" title="UIButton">UIButton<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollectionViewDataSource/" title="UICollectionViewDataSource">UICollectionViewDataSource<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollectionViewDataSource/UICollectionViewDelegate/" title="UICollectionViewDelegate">UICollectionViewDelegate<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollectionViewDataSource/UICollectionViewDelegate/cellForItemAtIndexPath/UIPinchGestureRecognizer/UICollectionViewFlowLayout/" title="UICollectionViewFlowLayout">UICollectionViewFlowLayout<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIGravityBehavior/UIDynamicItemBehavior/UICollisionBehavior/" title="UICollisionBehavior">UICollisionBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollisionBehaviorDelegate/UIDynamicAnimator/UICollisionBehavior/" title="UICollisionBehavior">UICollisionBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollisionBehaviorDelegate/" title="UICollisionBehaviorDelegate">UICollisionBehaviorDelegate<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIControlStateNormal/UIControlEventTouchUpInside/" title="UIControlEventTouchUpInside">UIControlEventTouchUpInside<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIControlStateNormal/" title="UIControlStateNormal">UIControlStateNormal<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIDatePicker/" title="UIDatePicker">UIDatePicker<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIAttachmentBehavior/UIDynamicAnimator/" title="UIDynamicAnimator">UIDynamicAnimator<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollisionBehaviorDelegate/UIDynamicAnimator/" title="UIDynamicAnimator">UIDynamicAnimator<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIDynamicAnimator/" title="UIDynamicAnimator">UIDynamicAnimator<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIGravityBehavior/UIDynamicItemBehavior/" title="UIDynamicItemBehavior">UIDynamicItemBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIDynamicAnimator/UIGravityBehavior/" title="UIGravityBehavior">UIGravityBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollisionBehaviorDelegate/UIDynamicAnimator/UICollisionBehavior/UIGravityBehavior/" title="UIGravityBehavior">UIGravityBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIGravityBehavior/" title="UIGravityBehavior">UIGravityBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MobileCoreServices/UIImagePickerController/" title="UIImagePickerController">UIImagePickerController<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIImageView/" title="UIImageView">UIImageView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS7/UIKit/" title="UIKit">UIKit<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITabBarController/UIKit/" title="UIKit">UIKit<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UINavigationController/UIKit/" title="UIKit">UIKit<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPanGestureRecognizer/UILabel/" title="UILabel">UILabel<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UILabel/" title="UILabel">UILabel<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UINavigationController/" title="UINavigationController">UINavigationController<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPageViewController/" title="UIPageViewController">UIPageViewController<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPanGestureRecognizer/" title="UIPanGestureRecognizer">UIPanGestureRecognizer<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPickerView/" title="UIPickerView">UIPickerView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollectionViewDataSource/UICollectionViewDelegate/cellForItemAtIndexPath/UIPinchGestureRecognizer/" title="UIPinchGestureRecognizer">UIPinchGestureRecognizer<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIPopoverController/" title="UIPopoverController">UIPopoverController<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIProgressView/" title="UIProgressView">UIProgressView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIDynamicAnimator/UIPushBehavior/" title="UIPushBehavior">UIPushBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIRefreshControl/" title="UIRefreshControl">UIRefreshControl<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIScrollView/" title="UIScrollView">UIScrollView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UISegmentedControl/" title="UISegmentedControl">UISegmentedControl<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UISlider/" title="UISlider">UISlider<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIDynamicAnimator/UISnapBehavior/" title="UISnapBehavior">UISnapBehavior<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UISwitch/" title="UISwitch">UISwitch<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITabBarController/" title="UITabBarController">UITabBarController<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UITableViewCellAccessoryDetailDisclosureButton/" title="UITableViewCellAccessoryDetailDisclosureButton">UITableViewCellAccessoryDetailDisclosureButton<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/" title="UITableViewDataSource">UITableViewDataSource<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/" title="UITableViewDelegate">UITableViewDelegate<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITextField/" title="UITextField">UITextField<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIAttachmentBehavior/UIDynamicAnimator/UIView/" title="UIView">UIView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UIWebView/" title="UIWebView">UIWebView<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSBundle/Security/GCD/bridge/" title="__bridge">__bridge<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UITableViewCellAccessoryDetailDisclosureButton/accessoryType/" title="accessoryType">accessoryType<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UICollectionViewDataSource/UICollectionViewDelegate/cellForItemAtIndexPath/" title="cellForItemAtIndexPath">cellForItemAtIndexPath<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/cellForRowAtIndexPath/" title="cellForRowAtIndexPath">cellForRowAtIndexPath<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/cellForRowAtIndexPath/commitEditingStyle/" title="commitEditingStyle">commitEditingStyle<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSFileManager/createDirectoryAtPath/" title="createDirectoryAtPath">createDirectoryAtPath<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/enumerateKeysAndObjectsUsingBlock/enumerateObjectsUsingBlock/deleteRowsAtIndexPaths/" title="deleteRowsAtIndexPaths">deleteRowsAtIndexPaths<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/dispatch-time/" title="dispatch_time">dispatch_time<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/UIRefreshControl/NSEC-PER-SEC/DISPATCH-TIME-NOW/dispatch-time-t/" title="dispatch_time_t">dispatch_time_t<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/if/for/while/do/" title="do">do<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/enumerateKeysAndObjectsUsingBlock/" title="enumerateKeysAndObjectsUsingBlock">enumerateKeysAndObjectsUsingBlock<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/enumerateKeysAndObjectsUsingBlock/enumerateObjectsUsingBlock/" title="enumerateObjectsUsingBlock">enumerateObjectsUsingBlock<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/if/for/" title="for">for<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/func/" title="func">func<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS7/" title="iOS7">iOS7<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/if/" title="if">if<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/dispatch-time/NSIndexPath/removeObject/insertObject/" title="insertObject">insertObject<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/instagram/" title="instagram">instagram<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/jottings/" title="jottings">jottings<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/dispatch-time/NSIndexPath/removeObject/" title="removeObject">removeObject<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/NSTimer/UIBackgroundTaskIdentifier/NSTimeInterval/scheduledTimerWithTimeInterval/" title="scheduledTimerWithTimeInterval">scheduledTimerWithTimeInterval<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/cellForRowAtIndexPath/commitEditingStyle/setEditing/" title="setEditing">setEditing<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/计划/swift/" title="swift">swift<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/titleForHeaderInSection/titleForFooterInSection/" title="titleForFooterInSection">titleForFooterInSection<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/UITableViewDelegate/UITableViewDataSource/titleForHeaderInSection/" title="titleForHeaderInSection">titleForHeaderInSection<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/if/for/while/" title="while">while<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Subscripts/下标/" title="下标">下标<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/func/函数/" title="函数">函数<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Protocols/协议/" title="协议">协议<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Optional-Chaining/可选链/" title="可选链">可选链<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Array/Dictionary/数组/字典/" title="字典">字典<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Methods/方法/实例方法/" title="实例方法">实例方法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Properties/属性/" title="属性">属性<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/NestedTypes/嵌套类型/" title="嵌套类型">嵌套类型<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Extensions/扩展/" title="扩展">扩展<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/if/for/while/do/控制语句/" title="控制语句">控制语句<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Array/Dictionary/数组/" title="数组">数组<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Methods/方法/" title="方法">方法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Initialization/构造过程/" title="构造过程">构造过程<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Initialization/析构过程/" title="析构过程">析构过程<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Enumerations/枚举/" title="枚举">枚举<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Generics/泛型/" title="泛型">泛型<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Classes/Structures/类/" title="类">类<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/TypeCasting/类型转换/" title="类型转换">类型转换<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Methods/方法/实例方法/类方法/" title="类方法">类方法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Classes/Structures/类/结构体/" title="结构体">结构体<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Inheritance/继承/" title="继承">继承<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/ARC/自动引用计数/" title="自动引用计数">自动引用计数<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/计划/" title="计划">计划<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Closures/闭包/" title="闭包">闭包<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Swift/Advanced-Operators/高级运算符/" title="高级运算符">高级运算符<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Swift/" title="Swift">Swift<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Array/" title="Array">Array<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Dictionary/" title="Dictionary">Dictionary<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/数组/" title="数组">数组<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/字典/" title="字典">字典<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m CSJ. <br/>
			</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/iceesj" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/iceesj" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		
		
		
		
		<a href="mailto:iceesj@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		<a href="http://iceesj.com/about" target="_blank" title="iceesj">iceesj</a> © 2018
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?d0b498b45b12c3ecd9b2f0931b132641";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
